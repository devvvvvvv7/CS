// Text-to-Speech using Web Speech API (built-in, no API key needed)
export const SUPPORTED_LANGUAGES = [
  { code: 'en-US', name: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
  { code: 'hi-IN', name: 'à¤¹à¤¿à¤‚à¤¦à¥€ (Hindi)', flag: 'ğŸ‡®ğŸ‡³' },
  { code: 'pa-IN', name: 'à¨ªà©°à¨œà¨¾à¨¬à©€ (Punjabi)', flag: 'ğŸ‡®ğŸ‡³' },
  { code: 'mr-IN', name: 'à¤®à¤°à¤¾à¤ à¥€ (Marathi)', flag: 'ğŸ‡®ğŸ‡³' },
  { code: 'ta-IN', name: 'à®¤à®®à®¿à®´à¯ (Tamil)', flag: 'ğŸ‡®ğŸ‡³' },
  { code: 'te-IN', name: 'à°¤à±†à°²à±à°—à± (Telugu)', flag: 'ğŸ‡®ğŸ‡³' },
  { code: 'bn-IN', name: 'à¦¬à¦¾à¦‚à¦²à¦¾ (Bengali)', flag: 'ğŸ‡®ğŸ‡³' },
  { code: 'gu-IN', name: 'àª—à«àªœàª°àª¾àª¤à«€ (Gujarati)', flag: 'ğŸ‡®ğŸ‡³' },
];

export const speak = (text: string, language: string = 'en-US'): Promise<void> => {
  return new Promise((resolve, reject) => {
    if (!('speechSynthesis' in window)) {
      reject(new Error('Speech synthesis not supported'));
      return;
    }

    // Cancel any ongoing speech
    window.speechSynthesis.cancel();

    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = language;
    utterance.rate = 0.9;
    utterance.pitch = 1;

    utterance.onend = () => resolve();
    utterance.onerror = (event) => reject(event);

    window.speechSynthesis.speak(utterance);
  });
};

export const stopSpeaking = () => {
  if ('speechSynthesis' in window) {
    window.speechSynthesis.cancel();
  }
};
